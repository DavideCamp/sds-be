JWT Authentication in Django REST Framework

What is JWT?

JSON Web Token (JWT) is an open standard (RFC 7519) for securely transmitting information between parties as a JSON object. JWTs are commonly used for authentication in modern web applications and APIs.

A JWT consists of three parts separated by dots:
- Header: Contains token type and hashing algorithm
- Payload: Contains claims (user data)
- Signature: Ensures token hasn't been tampered with

Installing JWT in Django

To use JWT authentication in Django REST Framework, install djangorestframework-simplejwt:

pip install djangorestframework-simplejwt

Configuration

Add the following to your settings.py:

REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework_simplejwt.authentication.JWTAuthentication',
    ],
}

from datetime import timedelta

SIMPLE_JWT = {
    'ACCESS_TOKEN_LIFETIME': timedelta(minutes=60),
    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),
    'ROTATE_REFRESH_TOKENS': True,
    'BLACKLIST_AFTER_ROTATION': True,
    'ALGORITHM': 'HS256',
    'SIGNING_KEY': SECRET_KEY,
    'AUTH_HEADER_TYPES': ('Bearer',),
}

URL Configuration

Add JWT token endpoints to your urls.py:

from rest_framework_simplejwt.views import (
    TokenObtainPairView,
    TokenRefreshView,
    TokenVerifyView,
)

urlpatterns = [
    path('api/token/', TokenObtainPairView.as_view(), name='token_obtain_pair'),
    path('api/token/refresh/', TokenRefreshView.as_view(), name='token_refresh'),
    path('api/token/verify/', TokenVerifyView.as_view(), name='token_verify'),
]

Obtaining Tokens

Users can obtain tokens by sending POST request to /api/token/ with username and password:

POST /api/token/
{
    "username": "user@example.com",
    "password": "password123"
}

Response:
{
    "access": "eyJ0eXAiOiJKV1QiLCJhbGc...",
    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc..."
}

Using Tokens

Include the access token in the Authorization header:

Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGc...

Token Refresh

When the access token expires, use the refresh token to get a new one:

POST /api/token/refresh/
{
    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc..."
}

Custom Claims

You can add custom claims to the JWT payload by creating a custom serializer:

from rest_framework_simplejwt.serializers import TokenObtainPairSerializer

class CustomTokenObtainPairSerializer(TokenObtainPairSerializer):
    @classmethod
    def get_token(cls, user):
        token = super().get_token(user)
        token['email'] = user.email
        token['is_staff'] = user.is_staff
        return token

Security Best Practices

1. Always use HTTPS in production
2. Keep SECRET_KEY secure and never commit it
3. Set appropriate token lifetimes
4. Implement token blacklisting for logout
5. Validate tokens on every request
6. Store tokens securely on the client side
